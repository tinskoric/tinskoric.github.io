<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tin Skoric - A Short Look at Rural Education</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../fonts.css">
<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Tin Skoric
      </li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../../">Tin Skoric</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../" class="sidebar-item-text sidebar-link"><i class="bi bi-house-fill" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/works/" class="sidebar-item-text sidebar-link"><i class="bi bi-archive-fill" role="img">
</i> 
 <span class="menu-text">Stuff</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../content/Resume.pdf" class="sidebar-item-text sidebar-link"><i class="bi bi-file-text-fill" role="img">
</i> 
 <span class="menu-text">Resume</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="mailto:tinskoric.work@gmail.com" class="sidebar-item-text sidebar-link"><i class="bi bi-envelope-at-fill" role="img">
</i> 
 <span class="menu-text">E-Mail</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.linkedin.com/in/tinskoric/" class="sidebar-item-text sidebar-link"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text">LinkedIn</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/tinskoric" class="sidebar-item-text sidebar-link"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">GitHub</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#a-bit-about-small-towns" id="toc-a-bit-about-small-towns" class="nav-link active" data-scroll-target="#a-bit-about-small-towns"><span class="header-section-number">1</span> A Bit About Small Towns</a></li>
  <li><a href="#educational-attainment" id="toc-educational-attainment" class="nav-link" data-scroll-target="#educational-attainment"><span class="header-section-number">2</span> Educational Attainment</a></li>
  <li><a href="#rural-income-inequality" id="toc-rural-income-inequality" class="nav-link" data-scroll-target="#rural-income-inequality"><span class="header-section-number">3</span> Rural Income Inequality</a></li>
  <li><a href="#a-tangent-about-rural-out-migration" id="toc-a-tangent-about-rural-out-migration" class="nav-link" data-scroll-target="#a-tangent-about-rural-out-migration"><span class="header-section-number">4</span> A Tangent About Rural Out-migration</a></li>
  <li><a href="#returning-to-income" id="toc-returning-to-income" class="nav-link" data-scroll-target="#returning-to-income"><span class="header-section-number">5</span> Returning to Income</a></li>
  <li><a href="#one-idea" id="toc-one-idea" class="nav-link" data-scroll-target="#one-idea"><span class="header-section-number">6</span> One Idea</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A Short Look at Rural Education</h1>
</div>



<div class="quarto-title-meta column-body">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 2022</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="a-bit-about-small-towns" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> A Bit About Small Towns</h1>
<p>There is a saying, oft-repeated in the description of plaguing ills, which tells very well the tragedy of places that are neither wholly rural, nor truly city and are certainly not suburbia. First slowly, then suddenly. The small town—the <em>rural</em> city—is a pocket—a vestige of what could have been looking out from some time immemorial when suburbia had not yet come to dominate. While the image of rural America—butchered by popular depictions—may tell of places hardly able to provide much of anything to their citizenry, the rural city is different. The rural city <em>can</em> provide, for now. But what after? There is little to do. A space of some thousands in number, educated relatively well, surrounded by dead industry and minimum wage service jobs. Sure, there are most opportunities available than in the truly empty spaces, but why stay for something so—I feel very sorry to put it like this—middling? The tragedy of these places is that they manage to provide more than they are worth—comparatively speaking—and present little reason to do anything but leave. “[…] Small towns are especially good at recognizing, nurturing, and launching talented individuals. They rally to prepare achievers to leave, succeed brilliantly in doing so, then lament the loss of their combined talents” <a href="#footnote3"><code>(Carr &amp; Kefalas, p. 51)</code></a>. I do not want to dwell too long on this note, but keep it in mind as I talk about some interesting aspects of American rural education.</p>
</section>
<section id="educational-attainment" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Educational Attainment</h1>
<p>The trope of the uneducated or undereducated rural is a gross exaggeration, and it washes over the variety of conditions which exist concerning education in rural America. When looking at primary and secondary education levels, the discrepancy is not exactly enormous. Particularly in the case of the former, “[rural children] perform as well as urban children on standardized tests” <a href="#footnote4"><code>(Clark, et al.)</code></a>. While standardized testing is a whole assortment of problems on its own, the fact the performance is generally consistent between rural and urban communities lends credence to the idea that the education gap <em>below</em> the post-secondary collegiate level is overblown. Where a clear discrepancy does exist though, is when it comes to <em>higher</em> levels of educational attainment. In terms of collegiate educational attainment “[rural students are behind] suburban and urban counterparts […] largely because of their lower socioeconomic background” <a href="#footnote2"><code>(Byun, et al.)</code></a>. What is curious though, is that rural areas across the country tend to underperform the trend <em>more</em> at higher levels of income (see the figure below). The more potentially well-off, the worse the performance relatively.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="RuralEducation_files/figure-html/trendlines-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="1536"></p>
</figure>
</div>
</div>
</div>
<p>This can be explained as rural counties simply making up a greater proportion of lower median income counties, but even with that in mind, urban counties at lower income levels do not tend to perform nearly as often and far above the trendline as they do at higher levels of income. The disparity between rural and urban educational achievement grows with greater levels of income. In this case, rurality is a greater determinant of attainment than income, but that is because the positive impact of rising incomes on education is conditioned by the negative impact of rurality. What could that negative impact be?</p>
</section>
<section id="rural-income-inequality" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Rural Income Inequality</h1>
<p>It is not just that rural America is poor, it is that “[…] high levels of local income inequality have been a disproportionally rural issue over the past half-century” <a href="#footnote1"><code>(Butler, et al.)</code></a>. There are actually many places in the United States that are both very rural and very affluent but living in them as a <em>less-than-affluent</em> individual is a quick ticket to a harsh life. Less dense regions have a lesser availability of public resources to aid individuals who need help and that means that as you start climbing the ladder of costs—going to college is slightly more expensive than the 3rd grade—those unable to bridge the gap will not. This is not the only factor, of course, and that is visible in the fact that at the state-level, sometimes the rural-urban divide on educational attainment is not so significant. For example, according to data from the <a href="#footnote8"><code>U.S. Census</code></a> and the <a href="#footnote7"><code>American Community Survey (ACS)</code></a>, the divide in the state of Texas is significantly less pronounced than that in the states of Alabama, Kansas, or West Virginia. Still, we see at the national level that there is a correlation between median income and educational attainment, and we see that rural counties underperform relative to urban ones as median income levels rise.</p>
</section>
<section id="a-tangent-about-rural-out-migration" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> A Tangent About Rural Out-migration</h1>
<p>Recall the small town. What, thinking between income and post-secondary collegiate education, primarily influences out-migration from rural areas? Looking again at county-level data from the <a href="#footnote8"><code>U.S. Census</code></a> and <a href="#footnote7"><code>ACS</code></a>, in the states of Vermont and West Virginia, the rural counties that did not experience population decline between 2010 and 2020 tended to be wealthier. In West Virginia for example, Pleasants County with one of the lowest number of residents, 25 years or older, recorded as holding a bachelor’s degree or higher at 11.9%, was one of only 6 counties—4 rural counties—that did not experience decline from 2010 to 2020. The counties not experiencing out-migration were, in all, less relatively poor than they were relatively or strictly uneducated. Income is a greater determinant than educational attainment in cases of migration when the two are examined purely side-by-side. The counties that did not experience population decline tended to be wealthier, even when they were not always particularly well educated compared to the rest of the state. Do people leave because they are educated or because they can make more money? There is a difference.</p>
</section>
<section id="returning-to-income" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Returning to Income</h1>
<p>If the goal is strictly to improve collegiate educational attainment on the whole among rural American counties, it is easier to just say “give people money,” in light of how complex accounting for rurality becomes. I wholeheartedly support that measure as a currently poor college student (as of 2023, fingers crossed I win the lottery), but unfortunately it does not play well politically. Incomes would have to be raised endogenously, but how? Remember the small towns, people <em>leave</em> the moment they think they have the tools to make it somewhere better. Moreover due to regional variation, it is clear that some places will not even see much change in outcome from higher levels of income. What is more actionable? What could prepare people for jobs that <em>are</em> available even in rural spaces (not counting remote work but that is valuable to consider) such that they will not just leave, and what could do so for less than what is charged by universities today?</p>
</section>
<section id="one-idea" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> One Idea</h1>
<p>Trade work is many things, but to avoid going into excruciating detail, think welders, electricians, mechanics, and all jobs of that nature. Trade <em>work</em> can be learned at trade <em>schools</em>. Trade schools tend to not only be cheaper than a baccalaureate education, but can provide an education that is—depending on the subject of study—applicable in almost any place, serving as a reliable ticket to employment even in rural counties. Additionally, vocational education can serve as an outlet for students who tend to underperform individually in classroom environments <a href="#footnote6"><code>(Rich)</code></a>. This is skilled work that pays well, or at least better than a lot of work available in rural areas. This is also work that requires an education and “[requires] workers who can interpret blueprints, program computerized machinery and solve problems on the fly” <a href="#footnote6"><code>(Rich)</code></a>. Despite this, the federal government has not pinned nearly as much value as should be onto these institutions as possible centers of rural education in the past few years <a href="#footnote6"><code>(Rich)</code></a>, allowing trade schools to fall out of the immediate mind even among some who live in the areas which could most benefit.</p>
<p>Trade schools are cheaper to attend and can provide an education that is more than applicable to the job market in rural counties. The point is not to prevent people from pursuing an academic career, it is to promote an alternative that could convince them to stay closer to home by giving them a way to actually make money there. Additionally, opening up vocational opportunities could get older residents in rural counties back to school, which would improve general education in counties. “In the future, most young adults will need post-secondary education in order to find good-paying jobs. However, millions of so-called ‘middle skill jobs’ will require something less than a bachelor’s degree” <a href="#footnote5"><code>(Harvard Graduate School of Education)</code></a>. Again, this is an alternative that makes sense in the context of wanting to raise incomes <em>and</em> keep populations within rural communities as it will achieve one by the other and vice versa. These institutions have their own problems, and I will at some point expand on them, but for now I will close by saying that I think they are valuable to improving both incomes in rural areas and reducing out-migration. Perhaps, as incomes rise, more will later go on to pursue a baccalaureate education and hopefully, there will be more opportunities to use that degree at home in future.</p>
<h3 id="References" class="anchored" data-anchor-id="one-idea">
References
</h3>
<p><b id="footnote1">1. <a href="https://doi.org/10.1007/s11113-020-09606-7">Population Change and Income Inequality in Rural America | Population Research and Policy Review, vol.&nbsp;39, no. 5, pp.&nbsp;889–911. | 2020 (Butler, Jaclyn, et al.)</a></b> <br> <b id="footnote2">2. <a href="https://doi.org/10.3102/0002831211416344">Rural-Nonrural Disparities in Postsecondary Educational Attainment Revisited | Am. Educ. Res. J., vol.&nbsp;49, no. 3, pp.&nbsp;412–437. | 2012 (Byun, Soo-yong, et al.)</a></b> <br> <b id="footnote3">3. Hollowing out the Middle: the Rural Brain Drain and What It Means for America | Beacon Press | 2009 (Carr, Patrick J., and Kefalas, Maria)</b> <br> <b id="footnote4">4. <a href="https://doi.org/10.7758/rsf.2022.8.3.01">Growing up in Rural America. | RSF: The Russell Sage Foundation Journal of the Social Sciences, vol.&nbsp;8, no. 3, pp.&nbsp;1–47. | 2022 (Clark, Shelley, et al.)</a></b> <br> <b id="footnote5">5. <a href="https://www.gse.harvard.edu/news/10/02/pathways-prosperity-seeks-redefine-american-education-system">Pathways to Prosperity Seeks to Redefine American Education System | Harvard University | 2010 (Harvard Graduate School of Education)</a></b> <br> <b id="footnote6">6. <a href="https://www.nytimes.com/2011/07/10/business/vocational-schools-face-deep-cuts-in-federal-funding.html">Tough Calculus as Technical Schools Face Deep Cuts | The New York Times | 2011 (Rich, Motoko)</a></b> <br> <b id="footnote7">7. <a href="https://www.census.gov/programs-surveys/acs/">2017-2021 American Community Survey (ACS) | Census.gov | (US Census Bureau)</a></b> <br> <b id="footnote8">8. <a href="https://www.census.gov/programs-surveys/decennial-census.html">Decennial Census of Population and Housing | Census.gov | (US Census Bureau)</a></b></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/tins\/page");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>